1:"$Sreact.fragment"
2:I[5244,[],""]
3:I[3866,[],""]
4:I[766,["177","static/chunks/app/layout-388a71c7789ceb2d.js"],"GoogleAnalytics"]
5:I[8173,["173","static/chunks/173-9038e5ec5c337389.js","585","static/chunks/app/(frontend)/articles/%5BissueNumber%5D/page-b3a3f4440f9933b1.js"],""]
9:I[6213,[],"OutletBoundary"]
b:I[6213,[],"MetadataBoundary"]
d:I[6213,[],"ViewportBoundary"]
f:I[4835,[],""]
:HL["/blog/_next/static/css/52f727efe8582ebc.css","style"]
6:T518,M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z7:T518,M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z0:{"P":null,"b":"9N19EF3KIqFP6E83leB_q","p":"/blog","c":["","articles","48",""],"i":false,"f":[[["",{"children":["(frontend)",{"children":["articles",{"children":[["issueNumber","48","d"],{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/blog/_next/static/css/52f727efe8582ebc.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"ja","children":[["$","body",null,{"className":"flex min-h-dvh flex-col","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","$L4",null,{"gaId":"G-41KF9W3KRE"}]]}]]}],{"children":["(frontend)",["$","$1","c",{"children":[null,[["$","header",null,{"className":"mx-auto flex w-[95%] max-w-(--breakpoint-lg) items-center py-3","children":[["$","nav",null,{"children":["$","$L5",null,{"href":"/","className":"alternative-link flex items-center font-bold text-lg","children":[["$","svg",null,{"viewBox":"0 0 100 100","xmlns":"http://www.w3.org/2000/svg","className":"mr-2 h-6 w-6","children":[["$","rect",null,{"x":0,"y":0,"width":20,"height":100,"fill":"white"}],["$","rect",null,{"x":40,"y":0,"width":20,"height":100,"fill":"white"}],["$","rect",null,{"x":80,"y":0,"width":20,"height":100,"fill":"white"}]]}],"waonpad blog"]}]}],["$","nav",null,{"className":"ml-auto","children":["$","ul",null,{"className":"flex items-center gap-6","children":[["$","li",null,{"children":["$","$L5",null,{"href":"/about","className":"alternative-link font-medium text-slate-300","children":"About"}]}],["$","li",null,{"children":["$","$L5",null,{"href":"/tags","className":"alternative-link font-medium text-slate-300","children":"Tags"}]}],["$","li",null,{"children":["$","a",null,{"href":"https://github.com/waonpad","className":"alternative-link text-slate-300","rel":"noopener noreferrer","target":"_blank","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 496 512","children":["$undefined",[["$","path","0",{"d":"$6","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":18,"width":18,"xmlns":"http://www.w3.org/2000/svg"}]}]}]]}]}]]}],["$","main",null,{"className":"mx-auto flex w-[95%] max-w-(--breakpoint-lg) grow flex-col py-2","children":["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","(frontend)","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:0:props:children:props:notFound:1:1:props:style","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$0:f:0:1:1:props:children:1:props:children:0:props:children:props:notFound:1:1:props:children:props:children:1:props:style","children":404}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:0:props:children:props:notFound:1:1:props:children:props:children:2:props:style","children":["$","h2",null,{"style":"$0:f:0:1:1:props:children:1:props:children:0:props:children:props:notFound:1:1:props:children:props:children:2:props:children:props:style","children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","footer",null,{"className":"mx-auto w-[95%] max-w-(--breakpoint-lg) py-4","children":["$","nav",null,{"className":"flex flex-col gap-3","children":[["$","ul",null,{"className":"flex items-center justify-center gap-6","children":["$","li",null,{"children":["$","a",null,{"href":"https://github.com/waonpad","className":"alternative-link text-slate-300","rel":"noopener noreferrer","target":"_blank","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 496 512","children":["$undefined",[["$","path","0",{"d":"$7","children":[]}]]],"className":"$undefined","style":{"color":"$undefined"},"height":18,"width":18,"xmlns":"http://www.w3.org/2000/svg"}]}]}]}],["$","ul",null,{"className":"flex items-center justify-center gap-6","children":[["$","li",null,{"children":["$","$L5",null,{"href":"/","className":"alternative-link font-medium text-slate-300","children":"Home"}]}],["$","li",null,{"children":["$","$L5",null,{"href":"/about","className":"alternative-link font-medium text-slate-300","children":"About"}]}],["$","li",null,{"children":["$","$L5",null,{"href":"/tags","className":"alternative-link font-medium text-slate-300","children":"Tags"}]}],["$","li",null,{"children":["$","$L5",null,{"href":"/privacy","className":"alternative-link font-medium text-slate-300","children":"Privacy"}]}]]}]]}]}]]]}],{"children":["articles",["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","(frontend)","children","articles","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["issueNumber","48","d"],["$","$1","c",{"children":[null,["$","$L2",null,{"parallelRouterKey":"children","segmentPath":["children","(frontend)","children","articles","children","$0:f:0:1:2:children:2:children:2:children:0","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L3",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L8",null,["$","$L9",null,{"children":"$La"}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","UJ0MpqLh8-K1ldRA2Tl5_",{"children":[["$","$Lb",null,{"children":"$Lc"}],["$","$Ld",null,{"children":"$Le"}],null]}]]}],false]],"m":"$undefined","G":["$f","$undefined"],"s":false,"S":true}
e:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
c:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"YouTubeの動画を自動で高評価するスクリプトが失敗していたので見てみる | waonpad blog"}],["$","meta","2",{"name":"description","content":"waonpadのブログです。"}],["$","meta","3",{"property":"og:title","content":"YouTubeの動画を自動で高評価するスクリプトが失敗していたので見てみる | waonpad blog"}],["$","meta","4",{"property":"og:description","content":"waonpadのブログです。"}],["$","meta","5",{"property":"og:image","content":"https://waonpad.github.io/blog/articles/48/opengraph-image.png"}],["$","meta","6",{"property":"og:image:width","content":"1200"}],["$","meta","7",{"property":"og:image:height","content":"630"}],["$","meta","8",{"property":"og:image:type","content":"image/png"}],["$","meta","9",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","10",{"name":"twitter:title","content":"YouTubeの動画を自動で高評価するスクリプトが失敗していたので見てみる | waonpad blog"}],["$","meta","11",{"name":"twitter:description","content":"waonpadのブログです。"}],["$","meta","12",{"name":"twitter:image","content":"https://waonpad.github.io/blog/articles/48/opengraph-image.png"}],["$","meta","13",{"name":"twitter:image:width","content":"1200"}],["$","meta","14",{"name":"twitter:image:height","content":"630"}],["$","meta","15",{"name":"twitter:image:type","content":"image/png"}],["$","link","16",{"rel":"icon","href":"/blog/favicon.ico"}]]
a:null
10:T9b50,<p>これ <a href="https://waonpad.github.io/blog/articles/30/" rel="noopener noreferrer" target="_blank">#30</a> を毎月始めに実行するcronを動かしていたら今月頭の実行が失敗していたので調べてみます。</p>
<p>実行時のリポジトリの状態
<a href="https://github.com/waonpad/youtube-playground/tree/6acbb8e28cb2d685621053ca98beffe09b110c3d" rel="noopener noreferrer" target="_blank">https://github.com/waonpad/youtube-playground/tree/6acbb8e28cb2d685621053ca98beffe09b110c3d</a></p>
<details><summary>実行時の出力</summary>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="console" data-theme="github-dark"><code data-language="console" data-theme="github-dark" style="display: grid;"><span data-line=""><span style="color:#79B8FF">bun run scripts/rate-all-videos-in-playlist.ts --no-save --rating like --ids PLXK8F4c9oU0nZZ3y0wtVAGjyVd-oF3Bfq,PLXK8F4c9oU0mUuUWmT3ZHjaLLqmV2szOV,PLXK8F4c9oU0n2wpLpgBgi6X2Wvz5c0ft3,PLXK8F4c9oU0nGImxaLp87NWI57tPNo9jm</span></span>
<span data-line=""><span style="color:#79B8FF">  shell: /usr/bin/bash -e {0}</span></span>
<span data-line=""><span style="color:#79B8FF">  env:</span></span>
<span data-line=""><span style="color:#79B8FF">    YOUTUBE_DATA_API_REFRESH_TOKEN: ***</span></span>
<span data-line=""><span style="color:#79B8FF">    GOOGLE_CLIENT_ID: ***</span></span>
<span data-line=""><span style="color:#79B8FF">    GOOGLE_CLIENT_SECRET: ***</span></span>
<span data-line=""><span style="color:#79B8FF">実行時引数:  {</span></span>
<span data-line=""><span style="color:#79B8FF">  clean: undefined,</span></span>
<span data-line=""><span style="color:#79B8FF">  noSave: true,</span></span>
<span data-line=""><span style="color:#79B8FF">  ids: [ "PLXK8F4c[9](https://github.com/waonpad/youtube-playground/actions/runs/14199078332/job/39781338924#step:5:10)oU0nZZ3y0wtVAGjyVd-oF3Bfq", "PLXK8F4c9oU0mUuUWmT3ZHjaLLqmV2szOV",</span></span>
<span data-line=""><span style="color:#79B8FF">    "PLXK8F4c9oU0n2wpLpgBgi6X2Wvz5c0ft3", "PLXK8F4c9oU0nGImxaLp87NWI57tPNo9jm"</span></span>
<span data-line=""><span style="color:#79B8FF">  ],</span></span>
<span data-line=""><span style="color:#79B8FF">  rating: "like",</span></span>
<span data-line=""><span style="color:#79B8FF">}</span></span>
<span data-line=""><span style="color:#79B8FF">プレイリストID:  PLXK8F4c9oU0nZZ3y0wtVAGjyVd-oF3Bfq</span></span>
<span data-line=""><span style="color:#79B8FF">動画をAPIから取得します</span></span>
<span data-line=""><span style="color:#79B8FF">プレイリスト内の動画数:  497</span></span>
<span data-line=""><span style="color:#79B8FF">削除または非公開の動画数:  5</span></span>
<span data-line=""><span style="color:#79B8FF">評価可能な動画数:  492</span></span>
<span data-line=""><span style="color:#79B8FF">新たに評価した動画数:  7</span></span>
<span data-line=""><span style="color:#79B8FF">プレイリストID:  PLXK8F4c9oU0mUuUWmT3ZHjaLLqmV2szOV</span></span>
<span data-line=""><span style="color:#79B8FF">動画をAPIから取得します</span></span>
<span data-line=""><span style="color:#79B8FF">プレイリスト内の動画数:  1829</span></span>
<span data-line=""><span style="color:#79B8FF">削除または非公開の動画数:  37</span></span>
<span data-line=""><span style="color:#79B8FF">評価可能な動画数:  1792</span></span>
<span data-line=""><span style="color:#79B8FF">45 |         // fallback to native</span></span>
<span data-line=""><span style="color:#79B8FF">46 |         return Function.prototype[Symbol.hasInstance].call(GaxiosError, instance);</span></span>
<span data-line=""><span style="color:#79B8FF">47 |     }</span></span>
<span data-line=""><span style="color:#79B8FF">48 |     constructor(message, config, response, error) {</span></span>
<span data-line=""><span style="color:#79B8FF">49 |         var _b;</span></span>
<span data-line=""><span style="color:#79B8FF">50 |         super(message);</span></span>
<span data-line=""><span style="color:#79B8FF">             ^</span></span>
<span data-line=""><span style="color:#79B8FF">error: The owner of the video that you are trying to rate has disabled ratings for that video.</span></span>
<span data-line=""><span style="color:#79B8FF">     config: {</span></span>
<span data-line=""><span style="color:#79B8FF">  url: "https://youtube.googleapis.com/youtube/v3/videos/rate?id=UpEPkPg8YP4&#x26;rating=like",</span></span>
<span data-line=""><span style="color:#79B8FF">  method: "POST",</span></span>
<span data-line=""><span style="color:#79B8FF">  apiVersion: "",</span></span>
<span data-line=""><span style="color:#79B8FF">  userAgentDirectives: [</span></span>
<span data-line=""><span style="color:#79B8FF">    [Object ...]</span></span>
<span data-line=""><span style="color:#79B8FF">  ],</span></span>
<span data-line=""><span style="color:#79B8FF">  paramsSerializer: [Function],</span></span>
<span data-line=""><span style="color:#79B8FF">  headers: [Object ...],</span></span>
<span data-line=""><span style="color:#79B8FF">  params: [Object ...],</span></span>
<span data-line=""><span style="color:#79B8FF">  validateStatus: [Function],</span></span>
<span data-line=""><span style="color:#79B8FF">  retry: true,</span></span>
<span data-line=""><span style="color:#79B8FF">  responseType: "unknown",</span></span>
<span data-line=""><span style="color:#79B8FF">  errorRedactor: [Function: defaultErrorRedactor],</span></span>
<span data-line=""><span style="color:#79B8FF">  retryConfig: [Object ...],</span></span>
<span data-line=""><span style="color:#79B8FF">},</span></span>
<span data-line=""><span style="color:#79B8FF">   response: {</span></span>
<span data-line=""><span style="color:#79B8FF">  config: [Object ...],</span></span>
<span data-line=""><span style="color:#79B8FF">  data: [Object ...],</span></span>
<span data-line=""><span style="color:#79B8FF">  headers: [Object ...],</span></span>
<span data-line=""><span style="color:#79B8FF">  status: 403,</span></span>
<span data-line=""><span style="color:#79B8FF">  statusText: "Forbidden",</span></span>
<span data-line=""><span style="color:#79B8FF">  request: [Object ...],</span></span>
<span data-line=""><span style="color:#79B8FF">},</span></span>
<span data-line=""><span style="color:#79B8FF">      error: undefined,</span></span>
<span data-line=""><span style="color:#79B8FF">     status: 403,</span></span>
<span data-line=""><span style="color:#79B8FF">       code: 403,</span></span>
<span data-line=""><span style="color:#79B8FF">     errors: [</span></span>
<span data-line=""><span style="color:#79B8FF">  [Object ...]</span></span>
<span data-line=""><span style="color:#79B8FF">],</span></span>
<span data-line=""><span style="color:#79B8FF"> gaxios-gaxios-error: "6.7.1",</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#79B8FF">      at new GaxiosError (/home/runner/work/youtube-playground/youtube-playground/node_modules/gaxios/build/src/common.js:50:9)</span></span>
<span data-line=""><span style="color:#79B8FF">      at &#x3C;anonymous> (/home/runner/work/youtube-playground/youtube-playground/node_modules/gaxios/build/src/gaxios.js:[14](https://github.com/waonpad/youtube-playground/actions/runs/14199078332/job/39781338924#step:5:15)2:23)</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#79B8FF">Bun v1.2.8 (Linux x64 baseline)</span></span>
<span data-line=""><span style="color:#79B8FF">Error: Process completed with exit code 1.</span></span><button type="button" title="Copy code" aria-label="Copy code" data="bun run scripts/rate-all-videos-in-playlist.ts --no-save --rating like --ids PLXK8F4c9oU0nZZ3y0wtVAGjyVd-oF3Bfq,PLXK8F4c9oU0mUuUWmT3ZHjaLLqmV2szOV,PLXK8F4c9oU0n2wpLpgBgi6X2Wvz5c0ft3,PLXK8F4c9oU0nGImxaLp87NWI57tPNo9jm
  shell: /usr/bin/bash -e {0}
  env:
    YOUTUBE_DATA_API_REFRESH_TOKEN: ***
    GOOGLE_CLIENT_ID: ***
    GOOGLE_CLIENT_SECRET: ***
実行時引数:  {
  clean: undefined,
  noSave: true,
  ids: [ &#x22;PLXK8F4c[9](https://github.com/waonpad/youtube-playground/actions/runs/14199078332/job/39781338924#step:5:10)oU0nZZ3y0wtVAGjyVd-oF3Bfq&#x22;, &#x22;PLXK8F4c9oU0mUuUWmT3ZHjaLLqmV2szOV&#x22;,
    &#x22;PLXK8F4c9oU0n2wpLpgBgi6X2Wvz5c0ft3&#x22;, &#x22;PLXK8F4c9oU0nGImxaLp87NWI57tPNo9jm&#x22;
  ],
  rating: &#x22;like&#x22;,
}
プレイリストID:  PLXK8F4c9oU0nZZ3y0wtVAGjyVd-oF3Bfq
動画をAPIから取得します
プレイリスト内の動画数:  497
削除または非公開の動画数:  5
評価可能な動画数:  492
新たに評価した動画数:  7
プレイリストID:  PLXK8F4c9oU0mUuUWmT3ZHjaLLqmV2szOV
動画をAPIから取得します
プレイリスト内の動画数:  1829
削除または非公開の動画数:  37
評価可能な動画数:  1792
45 |         // fallback to native
46 |         return Function.prototype[Symbol.hasInstance].call(GaxiosError, instance);
47 |     }
48 |     constructor(message, config, response, error) {
49 |         var _b;
50 |         super(message);
             ^
error: The owner of the video that you are trying to rate has disabled ratings for that video.
     config: {
  url: &#x22;https://youtube.googleapis.com/youtube/v3/videos/rate?id=UpEPkPg8YP4&#x26;rating=like&#x22;,
  method: &#x22;POST&#x22;,
  apiVersion: &#x22;&#x22;,
  userAgentDirectives: [
    [Object ...]
  ],
  paramsSerializer: [Function],
  headers: [Object ...],
  params: [Object ...],
  validateStatus: [Function],
  retry: true,
  responseType: &#x22;unknown&#x22;,
  errorRedactor: [Function: defaultErrorRedactor],
  retryConfig: [Object ...],
},
   response: {
  config: [Object ...],
  data: [Object ...],
  headers: [Object ...],
  status: 403,
  statusText: &#x22;Forbidden&#x22;,
  request: [Object ...],
},
      error: undefined,
     status: 403,
       code: 403,
     errors: [
  [Object ...]
],
 gaxios-gaxios-error: &#x22;6.7.1&#x22;,

      at new GaxiosError (/home/runner/work/youtube-playground/youtube-playground/node_modules/gaxios/build/src/common.js:50:9)
      at <anonymous> (/home/runner/work/youtube-playground/youtube-playground/node_modules/gaxios/build/src/gaxios.js:[14](https://github.com/waonpad/youtube-playground/actions/runs/14199078332/job/39781338924#step:5:15)2:23)

Bun v1.2.8 (Linux x64 baseline)
Error: Process completed with exit code 1." class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
</details> 
<p>これか。</p>
<blockquote>
<p>The owner of the video that you are trying to rate has disabled ratings for that video.
（評価しようとしている動画の所有者が、その動画の評価を無効にしています。）</p>
</blockquote>
<p>YouTube Data APIのドキュメントにもエラーが載っていました。
<a href="https://developers.google.com/youtube/v3/docs/videos/rate#errors" rel="noopener noreferrer" target="_blank">Videos: rate  |  YouTube Data API  |  Google for Developers</a></p>
<p>動画自体はこれ。
<a href="https://youtu.be/UpEPkPg8YP4?si=mbLEtjX2J-orEOKp" rel="noopener noreferrer" target="_blank">Caramel Pain / 星街すいせい(official) - YouTube</a></p>
<p>ブラウザからなら普通に評価できるんですが、評価数が非表示にされているのがダメっぽい・・・？</p>
<p>以下のような質問もありました。
<a href="https://stackoverflow.com/questions/65085572/how-can-i-solve-video-rating-disabled" rel="noopener noreferrer" target="_blank">youtube - How can I solve Video Rating Disabled? - Stack Overflow</a></p>
<p>ローカルで評価を取得してみると普通に現在の値が取得できますね。
この質問の回答は少なくとも現在は間違っているようです。</p>
<p>ああ、ローカルで試してみた事だしエラーの全文も見ておこう。</p>
<details><summary>全文</summary>
<figure data-rehype-pretty-code-figure=""><pre tabindex="0" data-language="json" data-theme="github-dark"><code data-language="json" data-theme="github-dark" style="display: grid;"><span data-line=""><span style="color:#E1E4E8">{</span></span>
<span data-line=""><span style="color:#79B8FF">  "config"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">    "url"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"https://youtube.googleapis.com/youtube/v3/videos/rate?id=UpEPkPg8YP4&#x26;rating=like"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">    "method"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"POST"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">    "apiVersion"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">    "userAgentDirectives"</span><span style="color:#E1E4E8">: [</span></span>
<span data-line=""><span style="color:#E1E4E8">      {</span></span>
<span data-line=""><span style="color:#79B8FF">        "product"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"google-api-nodejs-client"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">        "version"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"7.2.0"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">        "comment"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"gzip"</span></span>
<span data-line=""><span style="color:#E1E4E8">      }</span></span>
<span data-line=""><span style="color:#E1E4E8">    ],</span></span>
<span data-line=""><span style="color:#79B8FF">    "headers"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">      "x-goog-api-client"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"gdcl/7.2.0 gl-node/22.6.0"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "Accept-Encoding"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"gzip"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "User-Agent"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"google-api-nodejs-client/7.2.0 (gzip)"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "Authorization"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"&#x3C;&#x3C;REDACTED> - See `errorRedactor` option in `gaxios` for configuration>."</span></span>
<span data-line=""><span style="color:#E1E4E8">    },</span></span>
<span data-line=""><span style="color:#79B8FF">    "params"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">      "id"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"UpEPkPg8YP4"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "rating"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"like"</span></span>
<span data-line=""><span style="color:#E1E4E8">    },</span></span>
<span data-line=""><span style="color:#79B8FF">    "retry"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">    "responseType"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"unknown"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">    "retryConfig"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">      "currentRetryAttempt"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "retry"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "httpMethodsToRetry"</span><span style="color:#E1E4E8">: [</span></span>
<span data-line=""><span style="color:#9ECBFF">        "GET"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#9ECBFF">        "HEAD"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#9ECBFF">        "PUT"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#9ECBFF">        "OPTIONS"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#9ECBFF">        "DELETE"</span></span>
<span data-line=""><span style="color:#E1E4E8">      ],</span></span>
<span data-line=""><span style="color:#79B8FF">      "noResponseRetries"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "retryDelayMultiplier"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">2</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "timeOfFirstRequest"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1743840963558</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "totalTimeout"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">9007199254740991</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "maxRetryDelay"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">9007199254740991</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "statusCodesToRetry"</span><span style="color:#E1E4E8">: [</span></span>
<span data-line=""><span style="color:#E1E4E8">        [</span></span>
<span data-line=""><span style="color:#79B8FF">          100</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">          199</span></span>
<span data-line=""><span style="color:#E1E4E8">        ],</span></span>
<span data-line=""><span style="color:#E1E4E8">        [</span></span>
<span data-line=""><span style="color:#79B8FF">          408</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">          408</span></span>
<span data-line=""><span style="color:#E1E4E8">        ],</span></span>
<span data-line=""><span style="color:#E1E4E8">        [</span></span>
<span data-line=""><span style="color:#79B8FF">          429</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">          429</span></span>
<span data-line=""><span style="color:#E1E4E8">        ],</span></span>
<span data-line=""><span style="color:#E1E4E8">        [</span></span>
<span data-line=""><span style="color:#79B8FF">          500</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">          599</span></span>
<span data-line=""><span style="color:#E1E4E8">        ]</span></span>
<span data-line=""><span style="color:#E1E4E8">      ]</span></span>
<span data-line=""><span style="color:#E1E4E8">    }</span></span>
<span data-line=""><span style="color:#E1E4E8">  },</span></span>
<span data-line=""><span style="color:#79B8FF">  "response"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">    "config"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">      "url"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"https://youtube.googleapis.com/youtube/v3/videos/rate?id=UpEPkPg8YP4&#x26;rating=like"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "method"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"POST"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "apiVersion"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">""</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "userAgentDirectives"</span><span style="color:#E1E4E8">: [</span></span>
<span data-line=""><span style="color:#E1E4E8">        {</span></span>
<span data-line=""><span style="color:#79B8FF">          "product"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"google-api-nodejs-client"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">          "version"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"7.2.0"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">          "comment"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"gzip"</span></span>
<span data-line=""><span style="color:#E1E4E8">        }</span></span>
<span data-line=""><span style="color:#E1E4E8">      ],</span></span>
<span data-line=""><span style="color:#79B8FF">      "headers"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">        "x-goog-api-client"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"gdcl/7.2.0 gl-node/22.6.0"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">        "Accept-Encoding"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"gzip"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">        "User-Agent"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"google-api-nodejs-client/7.2.0 (gzip)"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">        "Authorization"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"&#x3C;&#x3C;REDACTED> - See `errorRedactor` option in `gaxios` for configuration>."</span></span>
<span data-line=""><span style="color:#E1E4E8">      },</span></span>
<span data-line=""><span style="color:#79B8FF">      "params"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">        "id"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"UpEPkPg8YP4"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">        "rating"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"like"</span></span>
<span data-line=""><span style="color:#E1E4E8">      },</span></span>
<span data-line=""><span style="color:#79B8FF">      "retry"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "responseType"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"unknown"</span></span>
<span data-line=""><span style="color:#E1E4E8">    },</span></span>
<span data-line=""><span style="color:#79B8FF">    "data"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">      "error"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">        "code"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">403</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">        "message"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"The owner of the video that you are trying to rate has disabled ratings for that video."</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">        "errors"</span><span style="color:#E1E4E8">: [</span></span>
<span data-line=""><span style="color:#E1E4E8">          {</span></span>
<span data-line=""><span style="color:#79B8FF">            "message"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"The owner of the video that you are trying to rate has disabled ratings for that video."</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">            "domain"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"youtube.video"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">            "reason"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"videoRatingDisabled"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">            "location"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"id"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">            "locationType"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"parameter"</span></span>
<span data-line=""><span style="color:#E1E4E8">          }</span></span>
<span data-line=""><span style="color:#E1E4E8">        ]</span></span>
<span data-line=""><span style="color:#E1E4E8">      }</span></span>
<span data-line=""><span style="color:#E1E4E8">    },</span></span>
<span data-line=""><span style="color:#79B8FF">    "headers"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">      "alt-svc"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"h3=</span><span style="color:#79B8FF">\"</span><span style="color:#9ECBFF">:443</span><span style="color:#79B8FF">\"</span><span style="color:#9ECBFF">; ma=2592000,h3-29=</span><span style="color:#79B8FF">\"</span><span style="color:#9ECBFF">:443</span><span style="color:#79B8FF">\"</span><span style="color:#9ECBFF">; ma=2592000"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "content-encoding"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"gzip"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "content-type"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"application/json; charset=UTF-8"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "date"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Sat, 05 Apr 2025 08:16:03 GMT"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "server"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"scaffolding on HTTPServer2"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "transfer-encoding"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"chunked"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "vary"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Origin, X-Origin, Referer"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "x-content-type-options"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"nosniff"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "x-frame-options"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"SAMEORIGIN"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "x-xss-protection"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"0"</span></span>
<span data-line=""><span style="color:#E1E4E8">    },</span></span>
<span data-line=""><span style="color:#79B8FF">    "status"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">403</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">    "statusText"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"Forbidden"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">    "request"</span><span style="color:#E1E4E8">: {</span></span>
<span data-line=""><span style="color:#79B8FF">      "responseURL"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"https://youtube.googleapis.com/youtube/v3/videos/rate?id=UpEPkPg8YP4&#x26;rating=like"</span></span>
<span data-line=""><span style="color:#E1E4E8">    }</span></span>
<span data-line=""><span style="color:#E1E4E8">  },</span></span>
<span data-line=""><span style="color:#79B8FF">  "status"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">403</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">  "code"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">403</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">  "errors"</span><span style="color:#E1E4E8">: [</span></span>
<span data-line=""><span style="color:#E1E4E8">    {</span></span>
<span data-line=""><span style="color:#79B8FF">      "message"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"The owner of the video that you are trying to rate has disabled ratings for that video."</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "domain"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"youtube.video"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "reason"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"videoRatingDisabled"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "location"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"id"</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#79B8FF">      "locationType"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"parameter"</span></span>
<span data-line=""><span style="color:#E1E4E8">    }</span></span>
<span data-line=""><span style="color:#E1E4E8">  ]</span></span>
<span data-line=""><span style="color:#E1E4E8">}</span></span><button type="button" title="Copy code" aria-label="Copy code" data="{
  &#x22;config&#x22;: {
    &#x22;url&#x22;: &#x22;https://youtube.googleapis.com/youtube/v3/videos/rate?id=UpEPkPg8YP4&#x26;rating=like&#x22;,
    &#x22;method&#x22;: &#x22;POST&#x22;,
    &#x22;apiVersion&#x22;: &#x22;&#x22;,
    &#x22;userAgentDirectives&#x22;: [
      {
        &#x22;product&#x22;: &#x22;google-api-nodejs-client&#x22;,
        &#x22;version&#x22;: &#x22;7.2.0&#x22;,
        &#x22;comment&#x22;: &#x22;gzip&#x22;
      }
    ],
    &#x22;headers&#x22;: {
      &#x22;x-goog-api-client&#x22;: &#x22;gdcl/7.2.0 gl-node/22.6.0&#x22;,
      &#x22;Accept-Encoding&#x22;: &#x22;gzip&#x22;,
      &#x22;User-Agent&#x22;: &#x22;google-api-nodejs-client/7.2.0 (gzip)&#x22;,
      &#x22;Authorization&#x22;: &#x22;<<REDACTED> - See &#x60;errorRedactor&#x60; option in &#x60;gaxios&#x60; for configuration>.&#x22;
    },
    &#x22;params&#x22;: {
      &#x22;id&#x22;: &#x22;UpEPkPg8YP4&#x22;,
      &#x22;rating&#x22;: &#x22;like&#x22;
    },
    &#x22;retry&#x22;: true,
    &#x22;responseType&#x22;: &#x22;unknown&#x22;,
    &#x22;retryConfig&#x22;: {
      &#x22;currentRetryAttempt&#x22;: 0,
      &#x22;retry&#x22;: 3,
      &#x22;httpMethodsToRetry&#x22;: [
        &#x22;GET&#x22;,
        &#x22;HEAD&#x22;,
        &#x22;PUT&#x22;,
        &#x22;OPTIONS&#x22;,
        &#x22;DELETE&#x22;
      ],
      &#x22;noResponseRetries&#x22;: 2,
      &#x22;retryDelayMultiplier&#x22;: 2,
      &#x22;timeOfFirstRequest&#x22;: 1743840963558,
      &#x22;totalTimeout&#x22;: 9007199254740991,
      &#x22;maxRetryDelay&#x22;: 9007199254740991,
      &#x22;statusCodesToRetry&#x22;: [
        [
          100,
          199
        ],
        [
          408,
          408
        ],
        [
          429,
          429
        ],
        [
          500,
          599
        ]
      ]
    }
  },
  &#x22;response&#x22;: {
    &#x22;config&#x22;: {
      &#x22;url&#x22;: &#x22;https://youtube.googleapis.com/youtube/v3/videos/rate?id=UpEPkPg8YP4&#x26;rating=like&#x22;,
      &#x22;method&#x22;: &#x22;POST&#x22;,
      &#x22;apiVersion&#x22;: &#x22;&#x22;,
      &#x22;userAgentDirectives&#x22;: [
        {
          &#x22;product&#x22;: &#x22;google-api-nodejs-client&#x22;,
          &#x22;version&#x22;: &#x22;7.2.0&#x22;,
          &#x22;comment&#x22;: &#x22;gzip&#x22;
        }
      ],
      &#x22;headers&#x22;: {
        &#x22;x-goog-api-client&#x22;: &#x22;gdcl/7.2.0 gl-node/22.6.0&#x22;,
        &#x22;Accept-Encoding&#x22;: &#x22;gzip&#x22;,
        &#x22;User-Agent&#x22;: &#x22;google-api-nodejs-client/7.2.0 (gzip)&#x22;,
        &#x22;Authorization&#x22;: &#x22;<<REDACTED> - See &#x60;errorRedactor&#x60; option in &#x60;gaxios&#x60; for configuration>.&#x22;
      },
      &#x22;params&#x22;: {
        &#x22;id&#x22;: &#x22;UpEPkPg8YP4&#x22;,
        &#x22;rating&#x22;: &#x22;like&#x22;
      },
      &#x22;retry&#x22;: true,
      &#x22;responseType&#x22;: &#x22;unknown&#x22;
    },
    &#x22;data&#x22;: {
      &#x22;error&#x22;: {
        &#x22;code&#x22;: 403,
        &#x22;message&#x22;: &#x22;The owner of the video that you are trying to rate has disabled ratings for that video.&#x22;,
        &#x22;errors&#x22;: [
          {
            &#x22;message&#x22;: &#x22;The owner of the video that you are trying to rate has disabled ratings for that video.&#x22;,
            &#x22;domain&#x22;: &#x22;youtube.video&#x22;,
            &#x22;reason&#x22;: &#x22;videoRatingDisabled&#x22;,
            &#x22;location&#x22;: &#x22;id&#x22;,
            &#x22;locationType&#x22;: &#x22;parameter&#x22;
          }
        ]
      }
    },
    &#x22;headers&#x22;: {
      &#x22;alt-svc&#x22;: &#x22;h3=\&#x22;:443\&#x22;; ma=2592000,h3-29=\&#x22;:443\&#x22;; ma=2592000&#x22;,
      &#x22;content-encoding&#x22;: &#x22;gzip&#x22;,
      &#x22;content-type&#x22;: &#x22;application/json; charset=UTF-8&#x22;,
      &#x22;date&#x22;: &#x22;Sat, 05 Apr 2025 08:16:03 GMT&#x22;,
      &#x22;server&#x22;: &#x22;scaffolding on HTTPServer2&#x22;,
      &#x22;transfer-encoding&#x22;: &#x22;chunked&#x22;,
      &#x22;vary&#x22;: &#x22;Origin, X-Origin, Referer&#x22;,
      &#x22;x-content-type-options&#x22;: &#x22;nosniff&#x22;,
      &#x22;x-frame-options&#x22;: &#x22;SAMEORIGIN&#x22;,
      &#x22;x-xss-protection&#x22;: &#x22;0&#x22;
    },
    &#x22;status&#x22;: 403,
    &#x22;statusText&#x22;: &#x22;Forbidden&#x22;,
    &#x22;request&#x22;: {
      &#x22;responseURL&#x22;: &#x22;https://youtube.googleapis.com/youtube/v3/videos/rate?id=UpEPkPg8YP4&#x26;rating=like&#x22;
    }
  },
  &#x22;status&#x22;: 403,
  &#x22;code&#x22;: 403,
  &#x22;errors&#x22;: [
    {
      &#x22;message&#x22;: &#x22;The owner of the video that you are trying to rate has disabled ratings for that video.&#x22;,
      &#x22;domain&#x22;: &#x22;youtube.video&#x22;,
      &#x22;reason&#x22;: &#x22;videoRatingDisabled&#x22;,
      &#x22;location&#x22;: &#x22;id&#x22;,
      &#x22;locationType&#x22;: &#x22;parameter&#x22;
    }
  ]
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);window.setTimeout(() => this.classList.remove(&#x27;rehype-pretty-copied&#x27;), 3000);"><span class="ready"></span><span class="success"></span></button><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath fill='%23adadad' d='M16.187 9.5H12.25a1.75 1.75 0 0 0-1.75 1.75v28.5c0 .967.784 1.75 1.75 1.75h23.5a1.75 1.75 0 0 0 1.75-1.75v-28.5a1.75 1.75 0 0 0-1.75-1.75h-3.937a4.25 4.25 0 0 1-4.063 3h-7.5a4.25 4.25 0 0 1-4.063-3M31.813 7h3.937A4.25 4.25 0 0 1 40 11.25v28.5A4.25 4.25 0 0 1 35.75 44h-23.5A4.25 4.25 0 0 1 8 39.75v-28.5A4.25 4.25 0 0 1 12.25 7h3.937a4.25 4.25 0 0 1 4.063-3h7.5a4.25 4.25 0 0 1 4.063 3M18.5 8.25c0 .966.784 1.75 1.75 1.75h7.5a1.75 1.75 0 1 0 0-3.5h-7.5a1.75 1.75 0 0 0-1.75 1.75'/%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2366ff85' d='M9 16.17L5.53 12.7a.996.996 0 1 0-1.41 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 1 0-1.41-1.41z'/%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {right: 1px;padding: 0;width: 24px;height: 24px;display: flex;margin-top: 2px;margin-right: 8px;position: absolute;border-radius: 25%;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></figure>
</details> 
<p>うーん。
まぁ結局対応としては手動で評価するしか無いっぽいので、<code>videoRatingDisabled</code>のエラーが返ってきたらログに出力するなり通知するなりしようかな。
発生頻度的にも問題無さそう。</p>8:["$","article",null,{"className":"w-full divide-y divide-[#30363db3]","children":[["$","section",null,{"className":"markdown","children":[["$","header",null,{"children":[["$","time",null,{"itemProp":"datePublished","dateTime":"2025-04-05T08:06:34Z","className":"text-gray-400 text-sm","children":"2025-04-05 17:06"}],["$","h1",null,{"className":"mt-0!","children":"YouTubeの動画を自動で高評価するスクリプトが失敗していたので見てみる"}],["$","ul",null,{"className":"mb-4 flex list-none! flex-wrap gap-2 pl-0!","children":[["$","li","8242012054",{"className":"mt-0!","children":["$","$L5",null,{"href":"/tags/tech","children":["$","span",null,{"className":"chip","children":"技術"}]}]}]]}]]}],["$","div",null,{"dangerouslySetInnerHTML":{"__html":"$10"}}]]}],[["$","section","2781026251",{"className":"markdown pt-4","children":[["$","header",null,{"className":"mb-2","children":["$","time",null,{"dateTime":"2025-04-05T18:14:49Z","className":"text-gray-400 text-sm","children":"2025-04-06 03:14"}]}],["$","div",null,{"dangerouslySetInnerHTML":{"__html":"<p>対応しました。\n一旦こんな感じのコードで良いでしょう。\n<a href=\"https://github.com/waonpad/youtube-playground/blob/5eac53782ec40063905ace40cbc6bfd5180f8d24/src/rate.ts#L51\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/waonpad/youtube-playground/blob/5eac53782ec40063905ace40cbc6bfd5180f8d24/src/rate.ts#L51</a></p>\n<p>評価が無効な動画があったらこんな感じのIssueで通知される。\n<a href=\"https://github.com/waonpad/youtube-playground/issues/1\" rel=\"noopener noreferrer\" target=\"_blank\">waonpad/youtube-playground#1</a></p>\n<p>今回の問題にはあまり関係無いですが、エラー原因の判別に使用する部分の型がついていないので、こんな感じに用意しました。\n<a href=\"https://github.com/waonpad/youtube-playground/blob/5eac53782ec40063905ace40cbc6bfd5180f8d24/types/googleapis.d.ts#L8\" rel=\"noopener noreferrer\" target=\"_blank\">https://github.com/waonpad/youtube-playground/blob/5eac53782ec40063905ace40cbc6bfd5180f8d24/types/googleapis.d.ts#L8</a></p>"}}]]}]],["$","section",null,{"className":"pt-8","children":[["$","header",null,{"className":"markdown mb-3!","children":["$","h2",null,{"children":"関連記事"}]}],["$","div",null,{"className":"flex flex-col gap-6","children":[["$","section",null,{"children":[["$","header",null,{"className":"markdown mb-2!","children":["$","h3",null,{"children":"本文中で参照した記事"}]}],["$","ol",null,{"className":"flex flex-col gap-2","children":[["$","li","30",{"children":[["$","time",null,{"dateTime":"2024-11-02T13:48:26Z","className":"text-gray-400 text-sm","children":"2024-11-02 22:48"}],["$","$L5",null,{"href":"/articles/30","className":"block","children":"Node.js + YouTube Data APIでプレイリスト内の動画を全て高評価する"}]]}]]}]]}],false]}]]}]]}]
